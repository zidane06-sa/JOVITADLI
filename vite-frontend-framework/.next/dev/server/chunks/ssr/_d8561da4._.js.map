{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Joki/Jovita/vite-frontend-framework/app/waiting/page.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState, useEffect } from \"react\"\nimport { useRouter } from \"next/navigation\"\nimport { Button } from \"@/components/ui/button\"\n\nexport default function WaitingPage() {\n  const router = useRouter()\n  const [currentCount, setCurrentCount] = useState(0)\n  const [targetQuantity, setTargetQuantity] = useState(0)\n  const [backendConnected, setBackendConnected] = useState(false)\n\n  useEffect(() => {\n    const target = Number.parseInt(sessionStorage.getItem(\"targetQuantity\") || \"0\")\n    setTargetQuantity(target)\n  }, [])\n\n  useEffect(() => {\n    if (currentCount >= targetQuantity && targetQuantity > 0) {\n      setTimeout(() => {\n        const currentTotal = Number.parseInt(sessionStorage.getItem(\"totalWaste\") || \"0\")\n        sessionStorage.setItem(\"totalWaste\", (currentTotal + targetQuantity).toString())\n        router.push(\"/confirmation\")\n      }, 500)\n    }\n  }, [currentCount, targetQuantity, router])\n\n  // Poll backend for item count (ESP32 triggers /api/servo/item-counted on IR 1->0)\n  useEffect(() => {\n    let pollCount = 0\n    const pollItemCount = async () => {\n      try {\n        const res = await fetch('http://localhost:5000/api/servo/item-status')\n        if (!res.ok) throw new Error(`status ${res.status}`)\n        const data = await res.json()\n\n        setBackendConnected(true)\n\n        if (data.success && typeof data.totalCount !== 'undefined') {\n          setCurrentCount(data.totalCount)\n          console.log(`Backend item count: ${data.totalCount}`)\n        }\n      } catch (err) {\n        console.warn('Failed to fetch item status:', err)\n        setBackendConnected(false)\n      }\n    }\n\n    const interval = setInterval(pollItemCount, 300) // Poll setiap 300ms\n    pollItemCount() // Run immediately\n    return () => clearInterval(interval)\n  }, [targetQuantity])\n\n  return (\n    <div className=\"min-h-screen relative flex flex-col items-center justify-center p-6 bg-gradient-to-br from-blue-500 via-blue-600 to-cyan-500\">\n      {/* Large circles in background */}\n      <div className=\"absolute inset-0 overflow-hidden opacity-20\">\n        <div className=\"absolute top-20 left-10 w-96 h-96 bg-blue-400 rounded-full\"></div>\n        <div className=\"absolute bottom-20 right-10 w-96 h-96 bg-blue-400 rounded-full\"></div>\n        <div className=\"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[500px] h-[500px] bg-blue-400 rounded-full\"></div>\n      </div>\n\n      {/* Header dengan logo MRT dan EcoSync */}\n      <div className=\"absolute top-6 left-1/2 -translate-x-1/2 z-20\">\n        <div className=\"bg-white rounded-full px-6 py-3 shadow-lg flex items-center gap-3\">\n          <div className=\"flex items-center gap-2\">\n            <div className=\"w-8 h-8 bg-blue-600 rounded flex items-center justify-center\">\n              <span className=\"text-white font-bold text-sm\">MRT</span>\n            </div>\n            <span className=\"text-sm font-semibold text-gray-700\">jakarta</span>\n          </div>\n          <div className=\"w-px h-6 bg-gray-300\"></div>\n          <div className=\"flex items-center gap-1\">\n            <div className=\"w-5 h-5 text-green-500\">‚úì</div>\n            <span className=\"text-sm font-semibold text-gray-700\">EcoSync</span>\n          </div>\n        </div>\n      </div>\n\n      {/* Main content */}\n      <div className=\"relative z-10 flex flex-col items-center\">\n        {/* Message box */}\n        <div className=\"border-4 border-white/50 rounded-[3rem] p-16 mb-8\">\n          <h1 className=\"text-5xl font-bold text-white text-center mb-8\">\n            SILAKAN MASUKKAN\n            <br />\n            SAMPAH ANDA\n          </h1>\n\n          {/* Waste icons */}\n          <div className=\"flex items-center justify-center gap-8\">\n            <div className=\"text-6xl\">üõçÔ∏è</div>\n            <div className=\"text-6xl\">ü•´</div>\n            <div className=\"text-6xl\">‚ö™</div>\n            <div className=\"text-6xl\">üîß</div>\n          </div>\n        </div>\n\n        {/* Counter display */}\n        {currentCount < targetQuantity && (\n          <div className=\"bg-white/20 backdrop-blur-sm rounded-2xl p-6 mb-6\">\n            <div className=\"text-white text-2xl font-bold text-center\">\n              {currentCount} / {targetQuantity} sampah terdeteksi\n            </div>\n          </div>\n        )}\n\n        {currentCount >= targetQuantity && (\n          <div className=\"text-white font-bold text-2xl animate-pulse\">Menuju halaman berikutnya...</div>\n        )}\n      </div>\n\n      {/* Call center */}\n      <div className=\"absolute bottom-6 right-6 z-20\">\n        <div className=\"bg-white rounded-full p-3 shadow-lg flex items-center gap-2\">\n          <div className=\"w-6 h-6 bg-blue-600 rounded-full\"></div>\n          <div className=\"text-xs\">\n            <div className=\"text-gray-500\">Call Center</div>\n            <div className=\"font-bold text-gray-700\">1500 332</div>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 337, "column": 0}, "map": {"version":3,"sources":["file:///C:/Joki/Jovita/vite-frontend-framework/node_modules/.pnpm/next%4016.0.10_react-dom%4019.2.0_react%4019.2.0__react%4019.2.0/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxDevRuntime\n"],"names":["module","exports","require","vendored","ReactJsxDevRuntime"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,wMACRC,QAAQ,CAAC,YAAY,CAAEC,kBAAkB","ignoreList":[0]}}]
}